/*
 * ROLE: Void Tooltip Surface (Headless)
 * RESPONSIBILITY: Defines the Glass/Retro/Flat physics for Floating UI elements.
 */

@use '../abstracts' as *;
@use '../base/typography' as *;

.void-tooltip {
  // 1. BASE GEOMETRY
  // Depth Logic: Tooltips are "Ephemeral Alerts", so they reside
  // on the Toast layer (200) to float above Modals (100).
  z-index: z('toast');
  pointer-events: none; // Allow clicking through the tooltip
  width: max-content;
  max-width: 250px;

  // 2. PHYSICS INHERITANCE
  // Applies border, background, and shadow logic based on current Theme
  @include glass-float($interactive: false);

  // 3. TYPOGRAPHY
  @include typography('caption');
  padding: var(--space-xs) var(--space-sm);
  text-align: center;
  color: var(--text-main);

  // 4. ANIMATION STATE (The Materialize Effect)
  // Default State: Dematerialized (Closed)
  opacity: 0;
  transform: translateY(4px) scale(0.95);
  filter: blur(calc(var(--physics-blur) / 2));

  // We explicitly transition specific properties to avoid layout thrashing
  transition:
    opacity var(--speed-base) var(--ease-stabilize),
    transform var(--speed-base) var(--ease-stabilize),
    filter var(--speed-base) var(--ease-stabilize);

  // Active State: Materialized (Open)
  &[data-state='open'] {
    opacity: 1;
    transform: translateY(0) scale(1);
    filter: blur(0);
  }

  // 5. PHYSICS OVERRIDES

  // RETRO: Robotic/Instant (Terminal Theme)
  @at-root [data-physics='retro'] & {
    border-radius: 0;
    transition: none; // Law: Instant motion
    filter: none; // Law: No blur
    background: var(--bg-canvas); // Opaque
    box-shadow: 4px 4px 0 var(--border-shadow); // Hard shadow
  }

  // FLAT: Clean Paper (Light Mode)
  @at-root [data-mode='light'] & {
    background: var(--bg-surface);
    filter: none;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
  }
}
