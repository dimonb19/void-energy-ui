/* Anchor/link styling with laser underline. */

@use '../abstracts' as *;

// Global reset.
a {
  text-decoration: none;
  color: inherit; // Inherit from parent to respect surface tone
  cursor: pointer;

  // Spring transition for hover color change
  transition: color var(--speed-fast) var(--ease-spring-snappy);

  @media (hover: hover) {
    &:hover {
      color: var(--energy-primary);
    }
  }
}

// Laser underline variant.
.link {
  position: relative;
  display: inline-block; // Required for transform origin logic
  color: var(--energy-primary);
  font-weight: var(--font-weight-medium);
  white-space: nowrap; // Keep the link intact
  border-bottom: var(--physics-border-width) solid
    alpha(var(--energy-primary), 20%);

  // Laser line.
  &::after {
    content: '';
    position: absolute;
    left: 0;
    right: 0;
    bottom: calc(var(--physics-border-width) * -2); // Distance from text
    height: var(--physics-border-width);

    background-color: var(--energy-primary);

    transform: scaleX(0);

    transform-origin: right;

    // Spring easing for organic underline reveal
    transition: transform var(--speed-base) var(--ease-spring-snappy);
  }

  @media (hover: hover) {
    &:hover {
      border-bottom-color: transparent; // Hide base border.

      &::after {
        transform: scaleX(1);
        transform-origin: left;
      }
    }
  }

  &:focus-visible {
    outline: none;
    box-shadow: none;

    // Also show the laser underline for extra visibility
    &::after {
      transform: scaleX(1);
      transform-origin: left;
    }
  }

  // Light mode tweaks.
  @at-root [data-mode='light'] & {
    font-weight: var(--font-weight-semibold);

    &::after {
      height: calc(var(--physics-border-width) * 2); // Thicker stroke.
      bottom: calc(var(--physics-border-width) * -3);
    }

    &:hover {
      text-shadow: none;
    }
  }
}
